<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Happy New Year</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  overflow: hidden;
  height: 100%;
  font-family: 'Dancing Script', cursive;
}

/* üî• CANVAS AT THE BACK */
canvas {
  position: fixed;
  inset: 0;
  z-index: 1;
}

/* üîù UI LAYERS ABOVE CANVAS */
#hint,
#message,
#secondMessage,
#timestamp,
#endBtn {
  position: fixed;
  z-index: 5;
}

/* Hint */
#hint {
  bottom: 80px;
  width: 100%;
  text-align: center;
  color: rgba(255,215,0,0.7);
  font-size: 16px;
}

/* Main message */
#message {
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: #FFD700;
  font-size: 22px;
  padding: 30px;
  opacity: 0;
  white-space: pre-wrap;
  text-shadow:
    0 0 10px rgba(255,215,0,0.6),
    0 0 25px rgba(255,215,0,0.4);
  transition: opacity 1s ease;
  pointer-events: none;
}

#message.show {
  opacity: 1;
}

/* Second page text */
#secondMessage {
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  color: #FFD700;
  opacity: 0;
  text-shadow:
    0 0 15px rgba(255,215,0,0.8),
    0 0 40px rgba(255,215,0,0.5);
  pointer-events: none;
}

#secondMessage.show {
  opacity: 1;
}

/* Timestamp */
#timestamp {
  bottom: 20px;
  width: 100%;
  text-align: center;
  font-size: 14px;
  color: rgba(255,215,0,0.6);
}

/* End button */
#endBtn {
  bottom: 50px;
  left: 50%;
  transform: translateX(-50%);
  padding: 8px 18px;
  font-size: 16px;
  color: #FFD700;
  background: rgba(0,0,0,0.6);
  border: 1px solid #FFD700;
  border-radius: 6px;
  display: none;
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div id="hint">Tap anywhere to launch</div>

<div id="message"></div>

<div id="secondMessage"></div>

<div id="timestamp"></div>
<button id="endBtn">End</button>

<audio id="fireSound" preload="auto">
  <source src="https://www.soundjay.com/misc/sounds/fireworks-1.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let rocketLaunched = false;
let particles = [];
let rocket = null;

window.addEventListener("resize", () => {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
});

class Particle {
  constructor(x, y) {
    const a = Math.random() * Math.PI * 2;
    const s = Math.random() * 4 + 2;
    this.x = x;
    this.y = y;
    this.vx = Math.cos(a) * s;
    this.vy = Math.sin(a) * s;
    this.alpha = 1;
    this.size = Math.random() * 3 + 2;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.04;
    this.alpha -= 0.015;
  }
  draw() {
    ctx.globalAlpha = this.alpha;
    ctx.fillStyle = "#FFD700";
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
    ctx.globalAlpha = 1;
  }
}

function explode(x, y) {
  for (let i = 0; i < 150; i++) {
    particles.push(new Particle(x, y));
  }
  if (navigator.vibrate) navigator.vibrate(40);
  const s = document.getElementById("fireSound");
  s.currentTime = 0;
  s.play();
}

function animate() {
  ctx.fillStyle = "rgba(0,0,0,0.2)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  if (rocket) {
    rocket.y -= 3;
    ctx.fillStyle = "white";
    ctx.fillRect(rocket.x - 2, rocket.y - 12, 4, 12);
    ctx.fillStyle = "orange";
    ctx.beginPath();
    ctx.arc(rocket.x, rocket.y + 10, 4, 0, Math.PI * 2);
    ctx.fill();

    if (rocket.y < canvas.height / 3) {
      explode(rocket.x, rocket.y);
      rocket = null;
      setTimeout(showMessage, 800);
    }
  }

  particles = particles.filter(p => p.alpha > 0);
  particles.forEach(p => { p.update(); p.draw(); });

  requestAnimationFrame(animate);
}
animate();

canvas.addEventListener("click", () => {
  if (!rocketLaunched) {
    rocketLaunched = true;
    document.getElementById("hint").style.display = "none";
    rocket = { x: canvas.width / 2, y: canvas.height - 40 };
  }
});

/* üìù TEXT TYPING */
const text = `I don‚Äôt wish for grand things this year. I just wish for more of us‚Äîmore conversations that last longer than planned, more moments that feel simple but mean everything, more reasons to smile because you exist.

If this year taught me anything, it‚Äôs that love doesn‚Äôt have to be loud to be real. Sometimes it‚Äôs just choosing the same person again, even as the calendar changes.

So here‚Äôs to a new year‚Äîone I‚Äôm grateful to begin with you in my heart.
Always,
Aaron`;

function showMessage() {
  const box = document.getElementById("message");
  box.classList.add("show");
  let i = 0;
  function type() {
    if (i < text.length) {
      box.textContent += text[i++];
      setTimeout(type, 35);
    } else {
      setTimeout(showSecond, 1200);
    }
  }
  type();
}

/* ‚ù§Ô∏è SECOND PAGE */
function showSecond() {
  document.getElementById("message").style.display = "none";
  const s = document.getElementById("secondMessage");
  s.textContent = "I love you Riaaaa";
  s.classList.add("show");

  const interval = setInterval(() => {
    explode(
      Math.random() * canvas.width,
      Math.random() * canvas.height / 2
    );
  }, 350);

  setTimeout(() => {
    clearInterval(interval);
    document.getElementById("endBtn").style.display = "block";
  }, 5000);
}

/* ‚è∞ TIMESTAMP */
setInterval(() => {
  document.getElementById("timestamp").textContent =
    new Date().toLocaleString();
}, 1000);

/* üîÅ END */
document.getElementById("endBtn").onclick = () => location.reload();
</script>

</body>
</html>
